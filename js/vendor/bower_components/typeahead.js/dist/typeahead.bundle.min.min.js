/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(d,c){if(typeof define==="function"&&define.amd){define("bloodhound",["jquery"],function(a){return d.Bloodhound=c(a)})}else{if(typeof exports==="object"){module.exports=c(require("jquery"))}else{d.Bloodhound=c(jQuery)}}})(this,function(u){var o=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(c){return !c||/^\s*$/.test(c)},escapeRegExChars:function(c){return c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(c){return typeof c==="string"},isNumber:function(c){return typeof c==="number"},isArray:u.isArray,isFunction:u.isFunction,isObject:u.isPlainObject,isUndefined:function(c){return typeof c==="undefined"},isElement:function(c){return !!(c&&c.nodeType===1)},isJQuery:function(c){return c instanceof u},toStr:function b(c){return o.isUndefined(c)||c===null?"":c+""},bind:u.proxy,each:function(c,e){u.each(c,d);function d(g,f){return e(f,g)}},map:u.map,filter:u.grep,every:function(d,c){var e=true;if(!d){return e}u.each(d,function(g,f){if(!(e=c.call(null,f,g,d))){return false}});return !!e},some:function(d,c){var e=false;if(!d){return e}u.each(d,function(g,f){if(e=c.call(null,f,g,d)){return false}});return !!e},mixin:u.extend,identity:function(c){return c},clone:function(c){return u.extend(true,{},c)},getIdGenerator:function(){var c=0;return function(){return c++}},templatify:function a(c){return u.isFunction(c)?c:d;function d(){return String(c)}},defer:function(c){setTimeout(c,0)},debounce:function(e,c,f){var d,g;return function(){var h=this,i=arguments,j,k;j=function(){d=null;if(!f){g=e.apply(h,i)}};k=f&&!d;clearTimeout(d);d=setTimeout(j,c);if(k){g=e.apply(h,i)}return g}},throttle:function(e,c){var g,h,d,j,f,i;f=0;i=function(){f=new Date();d=null;j=e.apply(g,h)};return function(){var l=new Date(),k=c-(l-f);g=this;h=arguments;if(k<=0){clearTimeout(d);d=null;f=l;j=e.apply(g,h)}else{if(!d){d=setTimeout(i,k)}}return j}},stringify:function(c){return o.isString(c)?c:JSON.stringify(c)},noop:function(){}}}();var m="0.11.1";var s=function(){return{nonword:a,whitespace:c,obj:{nonword:b(a),whitespace:b(c)}};function c(d){d=o.toStr(d);return d?d.split(/\s+/):[]}function a(d){d=o.toStr(d);return d?d.split(/\W+/):[]}function b(d){return function e(g){g=o.isArray(g)?g:[].slice.call(arguments,0);return function f(h){var i=[];o.each(g,function(j){i=i.concat(d(o.toStr(h[j])))});return i}}}}();var n=function(){function h(i){this.maxSize=o.isNumber(i)?i:100;this.reset();if(this.maxSize<=0){this.set=this.get=u.noop}}o.mixin(h.prototype,{set:function b(l,i){var j=this.list.tail,k;if(this.size>=this.maxSize){this.list.remove(j);delete this.hash[j.key];this.size--}if(k=this.hash[l]){k.val=i;this.list.moveToFront(k)}else{k=new g(l,i);this.list.add(k);this.hash[l]=k;this.size++}},get:function f(j){var i=this.hash[j];if(i){this.list.moveToFront(i);return i.val}},reset:function d(){this.size=0;this.hash={};this.list=new e()}});function e(){this.head=this.tail=null}o.mixin(e.prototype,{add:function c(i){if(this.head){i.next=this.head;this.head.prev=i}this.head=i;this.tail=this.tail||i},remove:function a(i){i.prev?i.prev.next=i.next:this.head=i.next;i.next?i.next.prev=i.prev:this.tail=i.prev},moveToFront:function(i){this.remove(i);this.add(i)}});function g(j,i){this.key=j;this.val=i;this.prev=this.next=null}return h}();var q=function(){var c;try{c=window.localStorage;c.setItem("~~~","!");c.removeItem("~~~")}catch(d){c=null}function f(h,i){this.prefix=["__",h,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+o.escapeRegExChars(this.prefix));this.ls=i||c;!this.ls&&this._noop()}o.mixin(f.prototype,{_prefix:function(h){return this.prefix+h},_ttlKey:function(h){return this._prefix(h)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=o.noop},_safeSet:function(j,h){try{this.ls.setItem(j,h)}catch(i){if(i.name==="QuotaExceededError"){this.clear();this._noop()}}},get:function(h){if(this.isExpired(h)){this.remove(h)}return b(this.ls.getItem(this._prefix(h)))},set:function(i,h,j){if(o.isNumber(j)){this._safeSet(this._ttlKey(i),e(g()+j))}else{this.ls.removeItem(this._ttlKey(i))}return this._safeSet(this._prefix(i),e(h))},remove:function(h){this.ls.removeItem(this._ttlKey(h));this.ls.removeItem(this._prefix(h));return this},clear:function(){var i,h=a(this.keyMatcher);for(i=h.length;i--;){this.remove(h[i])}return this},isExpired:function(h){var i=b(this.ls.getItem(this._ttlKey(h)));return o.isNumber(i)&&g()>i?true:false}});return f;function g(){return new Date().getTime()}function e(h){return JSON.stringify(o.isUndefined(h)?null:h)}function b(h){return u.parseJSON(h)}function a(k){var i,j,h=[],l=c.length;for(i=0;i<l;i++){if((j=c.key(i)).match(k)){h.push(j.replace(k,""))}}return h}}();var t=function(){var g=0,d={},a=6,e=new n(10);function b(i){i=i||{};this.cancelled=false;this.lastReq=null;this._send=i.transport;this._get=i.limiter?i.limiter(this._get):this._get;this._cache=i.cache===false?new n(0):e}b.setMaxPendingRequests=function h(i){a=i};b.resetCache=function c(){e.reset()};o.mixin(b.prototype,{_fingerprint:function f(i){i=i||{};return i.url+i.type+u.param(i.data||{})},_get:function(F,l){var j=this,E,D;E=this._fingerprint(F);if(this.cancelled||E!==this.lastReq){return}if(D=d[E]){D.done(i).fail(k)}else{if(g<a){g++;d[E]=this._send(F).done(i).fail(k).always(C)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function i(y){l(null,y);j._cache.set(E,y)}function k(){l(true)}function C(){g--;delete d[E];if(j.onDeckRequestArgs){j._get.apply(j,j.onDeckRequestArgs);j.onDeckRequestArgs=null}}},get:function(i,l){var j,k;l=l||u.noop;i=o.isString(i)?{url:i}:i||{};k=this._fingerprint(i);this.cancelled=false;this.lastReq=k;if(j=this._cache.get(k)){l(null,j)}else{this._get(i,l)}},cancel:function(){this.cancelled=true}});return b}();var x=window.SearchIndex=function(){var l="c",k="i";function f(y){y=y||{};if(!y.datumTokenizer||!y.queryTokenizer){u.error("datumTokenizer and queryTokenizer are both required")}this.identify=y.identify||o.stringify;this.datumTokenizer=y.datumTokenizer;this.queryTokenizer=y.queryTokenizer;this.reset()}o.mixin(f.prototype,{bootstrap:function d(y){this.datums=y.datums;this.trie=y.trie},add:function(y){var B=this;y=o.isArray(y)?y:[y];o.each(y,function(F){var A,E;B.datums[A=B.identify(F)]=F;E=b(B.datumTokenizer(F));o.each(E,function(J){var C,D,I;C=B.trie;D=J.split("");while(I=D.shift()){C=C[l][I]||(C[l][I]=j());C[k].push(A)}})})},get:function e(B){var y=this;return o.map(B,function(A){return y.datums[A]})},search:function g(F){var E=this,D,y;D=b(this.queryTokenizer(F));o.each(D,function(J){var A,B,C,I;if(y&&y.length===0){return false}A=E.trie;B=J.split("");while(A&&(C=B.shift())){A=A[l][C]}if(A&&B.length===0){I=A[k].slice(0);y=y?a(y,I):I}else{y=[];return false}});return y?o.map(c(y),function(A){return E.datums[A]}):[]},all:function i(){var B=[];for(var y in this.datums){B.push(this.datums[y])}return B},reset:function z(){this.datums={};this.trie=j()},serialize:function h(){return{datums:this.datums,trie:this.trie}}});return f;function b(y){y=o.filter(y,function(B){return !!B});y=o.map(y,function(B){return B.toLowerCase()});return y}function j(){var y={};y[k]=[];y[l]={};return y}function c(E){var y={},G=[];for(var H=0,F=E.length;H<F;H++){if(!y[E[H]]){y[E[H]]=true;G.push(E[H])}}return G}function a(H,K){var y=0,I=0,G=[];H=H.sort();K=K.sort();var L=H.length,J=K.length;while(y<L&&I<J){if(H[y]<K[I]){y++}else{if(H[y]>K[I]){I++}else{G.push(H[y]);y++;I++}}}return G}}();var r=function(){var c;c={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function b(g){this.url=g.url;this.ttl=g.ttl;this.cache=g.cache;this.prepare=g.prepare;this.transform=g.transform;this.transport=g.transport;this.thumbprint=g.thumbprint;this.storage=new q(g.cacheKey)}o.mixin(b.prototype,{_settings:function d(){return{url:this.url,type:"GET",dataType:"json"}},store:function f(g){if(!this.cache){return}this.storage.set(c.data,g,this.ttl);this.storage.set(c.protocol,location.protocol,this.ttl);this.storage.set(c.thumbprint,this.thumbprint,this.ttl)},fromCache:function e(){var h={},g;if(!this.cache){return null}h.data=this.storage.get(c.data);h.protocol=this.storage.get(c.protocol);h.thumbprint=this.storage.get(c.thumbprint);g=h.thumbprint!==this.thumbprint||h.protocol!==location.protocol;return h.data&&!g?h.data:null},fromNetwork:function(k){var h=this,j;if(!k){return}j=this.prepare(this._settings());this.transport(j).fail(i).done(g);function i(){k(true)}function g(l){k(null,h.transform(l))}},clear:function a(){this.storage.clear();return this}});return b}();var v=function(){function c(e){this.url=e.url;this.prepare=e.prepare;this.transform=e.transform;this.transport=new t({cache:e.cache,limiter:e.limiter,transport:e.transport})}o.mixin(c.prototype,{_settings:function d(){return{url:this.url,type:"GET",dataType:"json"}},get:function a(f,i){var g=this,h;if(!i){return}f=f||"";h=this.prepare(f,this._settings());return this.transport.get(h,e);function e(k,j){k?i([]):i(g.transform(j))}},cancelLastRequest:function b(){this.transport.cancel()}});return c}();var w=function(){return function c(h){var i,g;i={initialize:true,identify:o.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null};h=o.mixin(i,h||{});!h.datumTokenizer&&u.error("datumTokenizer is required");!h.queryTokenizer&&u.error("queryTokenizer is required");g=h.sorter;h.sorter=g?function(j){return j.sort(g)}:o.identity;h.local=o.isFunction(h.local)?h.local():h.local;h.prefetch=f(h.prefetch);h.remote=a(h.remote);return h};function f(g){var h;if(!g){return null}h={url:null,ttl:24*60*60*1000,cache:true,cacheKey:null,thumbprint:"",prepare:o.identity,transform:o.identity,transport:null};g=o.isString(g)?{url:g}:g;g=o.mixin(h,g);!g.url&&u.error("prefetch requires url to be set");g.transform=g.filter||g.transform;g.cacheKey=g.cacheKey||g.url;g.thumbprint=m+g.thumbprint;g.transport=g.transport?e(g.transport):u.ajax;return g}function a(g){var h;if(!g){return}h={url:null,cache:true,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:o.identity,transport:null};g=o.isString(g)?{url:g}:g;g=o.mixin(h,g);!g.url&&u.error("remote requires url to be set");g.transform=g.filter||g.transform;g.prepare=b(g);g.limiter=d(g);g.transport=g.transport?e(g.transport):u.ajax;delete g.replace;delete g.wildcard;delete g.rateLimitBy;delete g.rateLimitWait;return g}function b(z){var i,g,k;i=z.prepare;g=z.replace;k=z.wildcard;if(i){return i}if(g){i=l}else{if(z.wildcard){i=j}else{i=h}}return i;function l(y,B){B.url=g(B.url,y);return B}function j(y,B){B.url=B.url.replace(k,encodeURIComponent(y));return B}function h(y,B){return B}}function d(h){var l,g,i;l=h.limiter;g=h.rateLimitBy;i=h.rateLimitWait;if(!l){l=/^throttle$/i.test(g)?j(i):k(i)}return l;function k(A){return function B(y){return o.debounce(y,A)}}function j(A){return function B(y){return o.throttle(y,A)}}}function e(h){return function g(i){var l=u.Deferred();h(i,j,k);return l;function j(z){o.defer(function(){l.resolve(z)})}function k(z){o.defer(function(){l.reject(z)})}}}}();var p=function(){var d;d=window&&window.Bloodhound;function z(y){y=w(y);this.sorter=y.sorter;this.identify=y.identify;this.sufficient=y.sufficient;this.local=y.local;this.remote=y.remote?new v(y.remote):null;this.prefetch=y.prefetch?new r(y.prefetch):null;this.index=new x({identify:this.identify,datumTokenizer:y.datumTokenizer,queryTokenizer:y.queryTokenizer});y.initialize!==false&&this.initialize()}z.noConflict=function a(){window&&(window.Bloodhound=d);return z};z.tokenizers=s;o.mixin(z.prototype,{__ttAdapter:function l(){var D=this;return this.remote?y:C;function y(A,B,F){return D.search(A,B,F)}function C(A,B){return D.search(A,B)}},_loadPrefetch:function f(){var F=this,y,E;y=u.Deferred();if(!this.prefetch){y.resolve()}else{if(E=this.prefetch.fromCache()){this.index.bootstrap(E);y.resolve()}else{this.prefetch.fromNetwork(D)}}return y.promise();function D(B,A){if(B){return y.reject()}F.add(A);F.prefetch.store(F.index.serialize());y.resolve()}},_initialize:function c(){var D=this,C;this.clear();(this.initPromise=this._loadPrefetch()).done(y);return this.initPromise;function y(){D.add(D.local)}},initialize:function c(y){return !this.initPromise||y?this._initialize():this.initPromise},add:function h(y){this.index.add(y);return this},get:function e(y){y=o.isArray(y)?y:[].slice.call(arguments);return this.index.get(y)},search:function g(G,I,y){var J=this,H;H=this.sorter(this.index.search(G));I(this.remote?H.slice():H);if(this.remote&&H.length<this.sufficient){this.remote.get(G,F)}else{if(this.remote){this.remote.cancelLastRequest()}}return this;function F(A){var B=[];o.each(A,function(C){!o.some(H,function(D){return J.identify(C)===J.identify(D)})&&B.push(C)});y&&y(B)}},all:function k(){return this.index.all()},clear:function b(){this.index.reset();return this},clearPrefetchCache:function i(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function j(){t.resetCache();return this},ttAdapter:function l(){return this.__ttAdapter()}});return z}();return p});(function(d,c){if(typeof define==="function"&&define.amd){define("typeahead.js",["jquery"],function(a){return c(a)})}else{if(typeof exports==="object"){module.exports=c(require("jquery"))}else{c(jQuery)}}})(this,function(s){var n=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(c){return !c||/^\s*$/.test(c)},escapeRegExChars:function(c){return c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(c){return typeof c==="string"},isNumber:function(c){return typeof c==="number"},isArray:s.isArray,isFunction:s.isFunction,isObject:s.isPlainObject,isUndefined:function(c){return typeof c==="undefined"},isElement:function(c){return !!(c&&c.nodeType===1)},isJQuery:function(c){return c instanceof s},toStr:function a(c){return n.isUndefined(c)||c===null?"":c+""},bind:s.proxy,each:function(c,e){s.each(c,d);function d(g,f){return e(f,g)}},map:s.map,filter:s.grep,every:function(d,c){var e=true;if(!d){return e}s.each(d,function(g,f){if(!(e=c.call(null,f,g,d))){return false}});return !!e},some:function(d,c){var e=false;if(!d){return e}s.each(d,function(g,f){if(e=c.call(null,f,g,d)){return false}});return !!e},mixin:s.extend,identity:function(c){return c},clone:function(c){return s.extend(true,{},c)},getIdGenerator:function(){var c=0;return function(){return c++}},templatify:function b(c){return s.isFunction(c)?c:d;function d(){return String(c)}},defer:function(c){setTimeout(c,0)},debounce:function(e,c,f){var d,g;return function(){var h=this,i=arguments,j,k;j=function(){d=null;if(!f){g=e.apply(h,i)}};k=f&&!d;clearTimeout(d);d=setTimeout(j,c);if(k){g=e.apply(h,i)}return g}},throttle:function(e,c){var g,h,d,j,f,i;f=0;i=function(){f=new Date();d=null;j=e.apply(g,h)};return function(){var x=new Date(),k=c-(x-f);g=this;h=arguments;if(k<=0){clearTimeout(d);d=null;f=x;j=e.apply(g,h)}else{if(!d){d=setTimeout(i,k)}}return j}},stringify:function(c){return n.isString(c)?c:JSON.stringify(c)},noop:function(){}}}();var m=function(){var d={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e;function e(f){var g,h;h=n.mixin({},d,f);g={css:b(),classes:h,html:c(h),selectors:a(h)};return{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(i){n.mixin(i,g)}}}function c(f){return{wrapper:'<span class="'+f.wrapper+'"></span>',menu:'<div class="'+f.menu+'"></div>'}}function a(f){var g={};n.each(f,function(h,i){g[i]="."+h});return g}function b(){var f={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(n.isMsie()){n.mixin(f.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}return f}}();var q=function(){var c,a;c="typeahead:";a={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function b(d){if(!d||!d.el){s.error("EventBus initialized without el")}this.$el=s(d.el)}n.mixin(b.prototype,{_trigger:function(d,e){var f;f=s.Event(c+d);(e=e||[]).unshift(f);this.$el.trigger.apply(this.$el,e);return f},before:function(d){var e,f;e=[].slice.call(arguments,1);f=this._trigger("before"+d,e);return f.isDefaultPrevented()},trigger:function(d){var e;this._trigger(d,[].slice.call(arguments,1));if(e=a[d]){this._trigger(e,[].slice.call(arguments,1))}}});return b}();var l=function(){var e=/\s+/,a=g();return{onSync:j,onAsync:f,off:d,trigger:c};function i(C,k,B,A){var D;if(!B){return this}k=k.split(e);B=A?h(B,A):B;this._callbacks=this._callbacks||{};while(D=k.shift()){this._callbacks[D]=this._callbacks[D]||{sync:[],async:[]};this._callbacks[D][C].push(B)}return this}function f(k,z,y){return i.call(this,"async",k,z,y)}function j(k,z,y){return i.call(this,"sync",k,z,y)}function d(x){var k;if(!this._callbacks){return this}x=x.split(e);while(k=x.shift()){delete this._callbacks[k]}return this}function c(C){var B,F,D,E,k;if(!this._callbacks){return this}C=C.split(e);D=[].slice.call(arguments,1);while((B=C.shift())&&(F=this._callbacks[B])){E=b(F.sync,this,[B].concat(D));k=b(F.async,this,[B].concat(D));E()&&a(k)}return this}function b(B,k,z){return A;function A(){var y;for(var w=0,x=B.length;!y&&w<x;w+=1){y=B[w].apply(k,z)===false}return !y}}function g(){var y;if(window.setImmediate){y=function k(w){setImmediate(function(){w()})}}else{y=function z(w){setTimeout(function(){w()},0)}}return y}function h(k,x){return k.bind?k.bind(x):function(){k.apply(x,[].slice.call(arguments,0))}}}();var u=function(c){var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function a(e){var h;e=n.mixin({},d,e);if(!e.node||!e.pattern){return}e.pattern=n.isArray(e.pattern)?e.pattern:[e.pattern];h=b(e.pattern,e.caseSensitive,e.wordsOnly);g(e.node,f);function f(i){var k,x,j;if(k=h.exec(i.data)){j=c.createElement(e.tagName);e.className&&(j.className=e.className);x=i.splitText(k.index);x.splitText(k[0].length);j.appendChild(x.cloneNode(true));i.parentNode.replaceChild(j,x)}return !!k}function g(j,i){var y,k=3;for(var z=0;z<j.childNodes.length;z++){y=j.childNodes[z];if(y.nodeType===k){z+=i(y)?1:0}else{g(y,i)}}}};function b(h,j,e){var f=[],g;for(var i=0,k=h.length;i<k;i++){f.push(n.escapeRegExChars(h[i]))}g=e?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")";return j?new RegExp(g):new RegExp(g,"i")}}(window.document);var p=function(){var f;f={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function O(w,x){w=w||{};if(!w.input){s.error("input is missing")}x.mixin(this);this.$hint=s(w.hint);this.$input=s(w.input);this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;this.$overflowHelper=e(this.$input);this._checkLanguageDirection();if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=n.noop}}O.normalizeQuery=function(w){return n.toStr(w).replace(/^\s*/g,"").replace(/\s{2,}/g," ")};n.mixin(O.prototype,l,{_onBlur:function j(){this.resetInputValue();this.trigger("blurred")},_onFocus:function V(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function b(x){var w=f[x.which||x.keyCode];this._managePreventDefault(w,x);if(w&&this._shouldTrigger(w,x)){this.trigger(w+"Keyed",x)}},_onInput:function ab(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function R(w,x){var y;switch(w){case"up":case"down":y=!c(x);break;default:y=false}y&&x.preventDefault()},_shouldTrigger:function a(w,x){var y;switch(w){case"tab":y=!c(x);break;default:y=true}return y},_checkLanguageDirection:function ac(){var w=(this.$input.css("direction")||"ltr").toLowerCase();if(this.dir!==w){this.dir=w;this.$hint.attr("dir",w);this.trigger("langDirChanged",w)}},_setQuery:function X(w,y){var z,x;z=k(w,this.query);x=z?this.query.length!==w.length:false;this.query=w;if(!y&&!z){this.trigger("queryChanged",this.query)}else{if(!y&&x){this.trigger("whitespaceChanged",this.query)}}},bind:function(){var x=this,w,A,y,z;w=n.bind(this._onBlur,this);A=n.bind(this._onFocus,this);y=n.bind(this._onKeydown,this);z=n.bind(this._onInput,this);this.$input.on("blur.tt",w).on("focus.tt",A).on("keydown.tt",y);if(!n.isMsie()||n.isMsie()>9){this.$input.on("input.tt",z)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(B){if(f[B.which||B.keyCode]){return}n.defer(n.bind(x._onInput,x,B))})}return this},focus:function Z(){this.$input.focus()},blur:function N(){this.$input.blur()},getLangDir:function Q(){return this.dir},getQuery:function U(){return this.query||""},setQuery:function X(w,x){this.setInputValue(w);this._setQuery(w,x)},hasQueryChangedSinceLastFocus:function i(){return this.query!==this.queryWhenFocused},getInputValue:function T(){return this.$input.val()},setInputValue:function P(w){this.$input.val(w);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function W(){this.setInputValue(this.query)},getHint:function aa(){return this.$hint.val()},setHint:function h(w){this.$hint.val(w)},clearHint:function g(){this.setHint("")},clearHintIfInvalid:function ad(){var w,x,z,y;w=this.getInputValue();x=this.getHint();z=w!==x&&x.indexOf(w)===0;y=w!==""&&z&&!this.hasOverflow();!y&&this.clearHint()},hasFocus:function Y(){return this.$input.is(":focus")},hasOverflow:function S(){var w=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=w},isCursorAtEnd:function(){var x,w,y;x=this.$input.val().length;w=this.$input[0].selectionStart;if(n.isNumber(w)){return w===x}else{if(document.selection){y=document.selection.createRange();y.moveStart("character",-x);return x===y.text.length}}return true},destroy:function d(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=s("<div>")}});return O;function e(w){return s('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:w.css("font-family"),fontSize:w.css("font-size"),fontStyle:w.css("font-style"),fontVariant:w.css("font-variant"),fontWeight:w.css("font-weight"),wordSpacing:w.css("word-spacing"),letterSpacing:w.css("letter-spacing"),textIndent:w.css("text-indent"),textRendering:w.css("text-rendering"),textTransform:w.css("text-transform")}).insertAfter(w)}function k(w,x){return O.normalizeQuery(w)===O.normalizeQuery(x)}function c(w){return w.altKey||w.ctrlKey||w.metaKey||w.shiftKey}}();var v=function(){var e,a;e={val:"tt-selectable-display",obj:"tt-selectable-object"};a=n.getIdGenerator();function d(w,x){w=w||{};w.templates=w.templates||{};w.templates.notFound=w.templates.notFound||w.templates.empty;if(!w.source){s.error("missing source")}if(!w.node){s.error("missing node")}if(w.name&&!Q(w.name)){s.error("invalid dataset name: "+w.name)}x.mixin(this);this.highlight=!!w.highlight;this.name=w.name||a();this.limit=w.limit||5;this.displayFn=b(w.display||w.displayKey);this.templates=O(w.templates,this.displayFn);this.source=w.source.__ttAdapter?w.source.__ttAdapter():w.source;this.async=n.isUndefined(w.async)?this.source.length>2:!!w.async;this._resetLastSuggestion();this.$el=s(w.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}d.extractData=function h(w){var x=s(w);if(x.data(e.obj)){return{val:x.data(e.val)||"",obj:x.data(e.obj)||null}}return null};n.mixin(d.prototype,l,{_overwrite:function S(w,x){x=x||[];if(x.length){this._renderSuggestions(w,x)}else{if(this.async&&this.templates.pending){this._renderPending(w)}else{if(!this.async&&this.templates.notFound){this._renderNotFound(w)}else{this._empty()}}}this.trigger("rendered",this.name,x,false)},_append:function J(w,x){x=x||[];if(x.length&&this.$lastSuggestion.length){this._appendSuggestions(w,x)}else{if(x.length){this._renderSuggestions(w,x)}else{if(!this.$lastSuggestion.length&&this.templates.notFound){this._renderNotFound(w)}}}this.trigger("rendered",this.name,x,true)},_renderSuggestions:function c(x,y){var w;w=this._getSuggestionsFragment(x,y);this.$lastSuggestion=w.children().last();this.$el.html(w).prepend(this._getHeader(x,y)).append(this._getFooter(x,y))},_appendSuggestions:function R(y,z){var w,x;w=this._getSuggestionsFragment(y,z);x=w.children().last();this.$lastSuggestion.after(w);this.$lastSuggestion=x},_renderPending:function L(w){var x=this.templates.pending;this._resetLastSuggestion();x&&this.$el.html(x({query:w,dataset:this.name}))},_renderNotFound:function K(w){var x=this.templates.notFound;this._resetLastSuggestion();x&&this.$el.html(x({query:w,dataset:this.name}))},_empty:function I(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function T(A,z){var x=this,y;y=document.createDocumentFragment();n.each(z,function w(D){var B,C;C=x._injectQuery(A,D);B=s(x.templates.suggestion(C)).data(e.obj,D).data(e.val,x.displayFn(D)).addClass(x.classes.suggestion+" "+x.classes.selectable);y.appendChild(B[0])});this.highlight&&u({className:this.classes.highlight,node:y,pattern:A});return s(y)},_getFooter:function i(w,x){return this.templates.footer?this.templates.footer({query:w,suggestions:x,dataset:this.name}):null},_getHeader:function M(w,x){return this.templates.header?this.templates.header({query:w,suggestions:x,dataset:this.name}):null},_resetLastSuggestion:function k(){this.$lastSuggestion=s()},_injectQuery:function g(x,w){return n.isObject(w)?n.mixin({_query:x},w):w},update:function N(B){var C=this,y=false,z=false,A=0;this.cancel();this.cancel=function D(){y=true;C.cancel=s.noop;C.async&&C.trigger("asyncCanceled",B)};this.source(B,w,x);!z&&w([]);function w(E){if(z){return}z=true;E=(E||[]).slice(0,C.limit);A=E.length;C._overwrite(B,E);if(A<C.limit&&C.async){C.trigger("asyncRequested",B)}}function x(E){E=E||[];if(!y&&A<C.limit){C.cancel=s.noop;A+=E.length;C._append(B,E.slice(0,C.limit-A));C.async&&C.trigger("asyncReceived",B)}}},cancel:s.noop,clear:function P(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function f(){return this.$el.is(":empty")},destroy:function j(){this.$el=s("<div>")}});return d;function b(x){x=x||n.stringify;return n.isFunction(x)?x:w;function w(y){return y[x]}}function O(x,w){return{notFound:x.notFound&&n.templatify(x.notFound),pending:x.pending&&n.templatify(x.pending),header:x.header&&n.templatify(x.header),footer:x.footer&&n.templatify(x.footer),suggestion:x.suggestion||y};function y(z){return s("<div>").text(w(z))}}function Q(w){return/^[_a-zA-Z0-9-]+$/.test(w)}}();var r=function(){function N(w,z){var y=this;w=w||{};if(!w.node){s.error("node is required")}z.mixin(this);this.$node=s(w.node);this.query=null;this.datasets=n.map(w.datasets,x);function x(A){var B=y.$node.find(A.node).first();A.node=B.length?B:s("<div>").appendTo(y.$node);return new v(A,z)}}n.mixin(N.prototype,l,{_onSelectableClick:function a(w){this.trigger("selectableClicked",s(w.currentTarget))},_onRendered:function O(x,w,z,y){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",w,z,y)},_onCleared:function I(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function c(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function M(){return n.every(this.datasets,w);function w(x){return x.isEmpty()}},_getSelectables:function G(){return this.$node.find(this.selectors.selectable)},_removeCursor:function g(){var w=this.getActiveSelectable();w&&w.removeClass(this.classes.cursor)},_ensureVisible:function L(x){var A,y,z,w;A=x.position().top;y=A+x.outerHeight(true);z=this.$node.scrollTop();w=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);if(A<0){this.$node.scrollTop(z+A)}else{if(w<y){this.$node.scrollTop(z+(y-w))}}},bind:function(){var w=this,x;x=n.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,x);n.each(this.datasets,function(y){y.onSync("asyncRequested",w._propagate,w).onSync("asyncCanceled",w._propagate,w).onSync("asyncReceived",w._propagate,w).onSync("rendered",w._onRendered,w).onSync("cleared",w._onCleared,w)});return this},isOpen:function b(){return this.$node.hasClass(this.classes.open)},open:function e(){this.$node.addClass(this.classes.open)},close:function d(){this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function f(w){this.$node.attr("dir",w)},selectableRelativeToCursor:function P(w){var y,z,x,A;z=this.getActiveSelectable();y=this._getSelectables();x=z?y.index(z):-1;A=x+w;A=(A+1)%(y.length+1)-1;A=A<-1?y.length-1:A;return A===-1?null:y.eq(A)},setCursor:function i(w){this._removeCursor();if(w=w&&w.first()){w.addClass(this.classes.cursor);this._ensureVisible(w)}},getSelectableData:function H(w){return w&&w.length?v.extractData(w):null},getActiveSelectable:function J(){var w=this._getSelectables().filter(this.selectors.cursor).first();return w.length?w:null},getTopSelectable:function h(){var w=this._getSelectables().first();return w.length?w:null},update:function K(x){var y=x!==this.query;if(y){this.query=x;n.each(this.datasets,w)}return y;function w(z){z.update(x)}},empty:function k(){n.each(this.datasets,w);this.query=null;this.$node.addClass(this.classes.empty);function w(x){x.clear()}},destroy:function j(){this.$node.off(".tt");this.$node=s("<div>");n.each(this.datasets,w);function w(x){x.destroy()}}});return N}();var t=function(){var h=r.prototype;function d(){r.apply(this,[].slice.call(arguments,0))}n.mixin(d.prototype,r.prototype,{open:function c(){!this._allDatasetsEmpty()&&this._show();return h.open.apply(this,[].slice.call(arguments,0))},close:function i(){this._hide();return h.close.apply(this,[].slice.call(arguments,0))},_onRendered:function e(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return h._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function g(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return h._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function f(j){this.$node.css(j==="ltr"?this.css.ltr:this.css.rtl);return h.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function b(){this.$node.hide()},_show:function a(){this.$node.css("display","block")}});return d}();var o=function(){function ai(y,x){var C,H,I,F,G,D,A,E,z,B,w;y=y||{};if(!y.input){s.error("missing input")}if(!y.menu){s.error("missing menu")}if(!y.eventBus){s.error("missing event bus")}x.mixin(this);this.eventBus=y.eventBus;this.minLength=n.isNumber(y.minLength)?y.minLength:1;this.input=y.input;this.menu=y.menu;this.enabled=true;this.active=false;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);C=e(this,"activate","open","_onFocused");H=e(this,"deactivate","_onBlurred");I=e(this,"isActive","isOpen","_onEnterKeyed");F=e(this,"isActive","isOpen","_onTabKeyed");G=e(this,"isActive","_onEscKeyed");D=e(this,"isActive","open","_onUpKeyed");A=e(this,"isActive","open","_onDownKeyed");E=e(this,"isActive","isOpen","_onLeftKeyed");z=e(this,"isActive","isOpen","_onRightKeyed");B=e(this,"_openIfActive","_onQueryChanged");w=e(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",C,this).onSync("blurred",H,this).onSync("enterKeyed",I,this).onSync("tabKeyed",F,this).onSync("escKeyed",G,this).onSync("upKeyed",D,this).onSync("downKeyed",A,this).onSync("leftKeyed",E,this).onSync("rightKeyed",z,this).onSync("queryChanged",B,this).onSync("whitespaceChanged",w,this).onSync("langDirChanged",this._onLangDirChanged,this)}n.mixin(ai.prototype,{_hacks:function aa(){var w,x;w=this.input.$input||s("<div>");x=this.menu.$node||s("<div>");w.on("blur.tt",function(A){var y,z,B;y=document.activeElement;z=x.is(y);B=x.has(y).length>0;if(n.isMsie()&&(z||B)){A.preventDefault();A.stopImmediatePropagation();n.defer(function(){w.focus()})}});x.on("mousedown.tt",function(y){y.preventDefault()})},_onSelectableClicked:function al(w,x){this.select(x)},_onDatasetCleared:function ap(){this._updateHint()},_onDatasetRendered:function az(y,w,z,x){this._updateHint();this.eventBus.trigger("render",z,x,w)},_onAsyncRequested:function aj(y,x,w){this.eventBus.trigger("asyncrequest",w,x)},_onAsyncCanceled:function ae(y,x,w){this.eventBus.trigger("asynccancel",w,x)},_onAsyncReceived:function ax(y,x,w){this.eventBus.trigger("asyncreceive",w,x)},_onFocused:function c(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function am(){if(this.input.hasQueryChangedSinceLastFocus()){this.eventBus.trigger("change",this.input.getQuery())}},_onEnterKeyed:function au(x,w){var y;if(y=this.menu.getActiveSelectable()){this.select(y)&&w.preventDefault()}},_onTabKeyed:function aq(x,w){var y;if(y=this.menu.getActiveSelectable()){this.select(y)&&w.preventDefault()}else{if(y=this.menu.getTopSelectable()){this.autocomplete(y)&&w.preventDefault()}}},_onEscKeyed:function ad(){this.close()},_onUpKeyed:function i(){this.moveCursor(-1)},_onDownKeyed:function d(){this.moveCursor(+1)},_onLeftKeyed:function ac(){if(this.dir==="rtl"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getTopSelectable())}},_onRightKeyed:function ab(){if(this.dir==="ltr"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getTopSelectable())}},_onQueryChanged:function an(w,x){this._minLengthMet(x)?this.menu.update(x):this.menu.empty()},_onWhitespaceChanged:function a(){this._updateHint()},_onLangDirChanged:function f(w,x){if(this.dir!==x){this.dir=x;this.menu.setLanguageDirection(x)}},_openIfActive:function g(){this.isActive()&&this.open()},_minLengthMet:function b(w){w=n.isString(w)?w:this.input.getQuery()||"";return w.length>=this.minLength},_updateHint:function ag(){var B,x,w,y,z,C,A;B=this.menu.getTopSelectable();x=this.menu.getSelectableData(B);w=this.input.getInputValue();if(x&&!n.isBlankString(w)&&!this.input.hasOverflow()){y=p.normalizeQuery(w);z=n.escapeRegExChars(y);C=new RegExp("^(?:"+z+")(.+$)","i");A=C.exec(x.val);A&&this.input.setHint(w+A[1])}else{this.input.clearHint()}},isEnabled:function j(){return this.enabled},enable:function ar(){this.enabled=true},disable:function at(){this.enabled=false},isActive:function h(){return this.active},activate:function ao(){if(this.isActive()){return true}else{if(!this.isEnabled()||this.eventBus.before("active")){return false}else{this.active=true;this.eventBus.trigger("active");return true}}},deactivate:function aw(){if(!this.isActive()){return true}else{if(this.eventBus.before("idle")){return false}else{this.active=false;this.close();this.eventBus.trigger("idle");return true}}},isOpen:function ay(){return this.menu.isOpen()},open:function ah(){if(!this.isOpen()&&!this.eventBus.before("open")){this.menu.open();this._updateHint();this.eventBus.trigger("open")}return this.isOpen()},close:function Z(){if(this.isOpen()&&!this.eventBus.before("close")){this.menu.close();this.input.clearHint();this.input.resetInputValue();this.eventBus.trigger("close")}return !this.isOpen()},setVal:function af(w){this.input.setQuery(n.toStr(w))},getVal:function ak(){return this.input.getQuery()},select:function k(x){var w=this.menu.getSelectableData(x);if(w&&!this.eventBus.before("select",w.obj)){this.input.setQuery(w.val,true);this.eventBus.trigger("select",w.obj);this.close();return true}return false},autocomplete:function av(z){var y,x,w;y=this.input.getQuery();x=this.menu.getSelectableData(z);w=x&&y!==x.val;if(w&&!this.eventBus.before("autocomplete",x.obj)){this.input.setQuery(x.val);this.eventBus.trigger("autocomplete",x.obj);return true}return false},moveCursor:function aA(w){var y,B,A,x,z;y=this.input.getQuery();B=this.menu.selectableRelativeToCursor(w);A=this.menu.getSelectableData(B);x=A?A.obj:null;z=this._minLengthMet()&&this.menu.update(y);if(!z&&!this.eventBus.before("cursorchange",x)){this.menu.setCursor(B);if(A){this.input.setInputValue(A.val)}else{this.input.resetInputValue();this._updateHint()}this.eventBus.trigger("cursorchange",x);return true}return false},destroy:function Y(){this.input.destroy();this.menu.destroy()}});return ai;function e(x){var w=[].slice.call(arguments,1);return function(){var y=[].slice.call(arguments);n.each(w,function(z){return x[z].apply(x,y)})}}}();(function(){var X,e,N;X=s.fn.typeahead;e={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};N={initialize:function W(y,z){var w;z=n.isArray(z)?z:[].slice.call(arguments,1);y=y||{};w=m(y.classNames);return this.each(x);function x(){var D,E,G,Z,H,A,B,C,J,F,I;n.each(z,function(Y){Y.highlight=!!y.highlight});D=s(this);E=s(w.html.wrapper);G=h(y.hint);Z=h(y.menu);H=y.hint!==false&&!G;A=y.menu!==false&&!Z;H&&(G=O(D,w));A&&(Z=s(w.html.menu).css(w.css.menu));G&&G.val("");D=Q(D,w);if(H||A){E.css(w.css.wrapper);D.css(H?w.css.input:w.css.inputWithNoHint);D.wrap(E).parent().prepend(H?G:null).append(A?Z:null)}I=A?t:r;B=new q({el:D});C=new p({hint:G,input:D},w);J=new I({node:Z,datasets:z},w);F=new o({input:C,menu:J,eventBus:B,minLength:y.minLength},w);D.data(e.www,w);D.data(e.typeahead,F)}},isEnabled:function k(){var w;M(this.first(),function(x){w=x.isEnabled()});return w},enable:function i(){M(this,function(w){w.enable()});return this},disable:function T(){M(this,function(w){w.disable()});return this},isActive:function P(){var w;M(this.first(),function(x){w=x.isActive()});return w},activate:function R(){M(this,function(w){w.activate()});return this},deactivate:function U(){M(this,function(w){w.deactivate()});return this},isOpen:function a(){var w;M(this.first(),function(x){w=x.isOpen()});return w},open:function g(){M(this,function(w){w.open()});return this},close:function c(){M(this,function(w){w.close()});return this},select:function S(w){var y=false,x=s(w);M(this.first(),function(z){y=z.select(x)});return y},autocomplete:function f(w){var y=false,x=s(w);M(this.first(),function(z){y=z.autocomplete(x)});return y},moveCursor:function L(w){var x=false;M(this.first(),function(y){x=y.moveCursor(w)});return x},val:function b(x){var w;if(!arguments.length){M(this.first(),function(y){w=y.getVal()});return w}else{M(this,function(y){y.setVal(x)});return this}},destroy:function K(){M(this,function(x,w){V(w);x.destroy()});return this}};s.fn.typeahead=function(w){if(N[w]){return N[w].apply(this,[].slice.call(arguments,1))}else{return N.initialize.apply(this,arguments)}};s.fn.typeahead.noConflict=function d(){s.fn.typeahead=X;return this};function M(w,x){w.each(function(){var y=s(this),z;(z=y.data(e.typeahead))&&x(z,y)})}function O(w,x){return w.clone().addClass(x.classes.hint).removeData().css(x.css.hint).css(j(w)).prop("readonly",true).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function Q(y,x){y.data(e.attrs,{dir:y.attr("dir"),autocomplete:y.attr("autocomplete"),spellcheck:y.attr("spellcheck"),style:y.attr("style")});y.addClass(x.classes.input).attr({autocomplete:"off",spellcheck:false});try{!y.attr("dir")&&y.attr("dir","auto")}catch(w){}return y}function j(w){return{backgroundAttachment:w.css("background-attachment"),backgroundClip:w.css("background-clip"),backgroundColor:w.css("background-color"),backgroundImage:w.css("background-image"),backgroundOrigin:w.css("background-origin"),backgroundPosition:w.css("background-position"),backgroundRepeat:w.css("background-repeat"),backgroundSize:w.css("background-size")}}function V(y){var x,w;x=y.data(e.www);w=y.parent().filter(x.selectors.wrapper);n.each(y.data(e.attrs),function(z,A){n.isUndefined(z)?y.removeAttr(A):y.attr(A,z)});y.removeData(e.typeahead).removeData(e.www).removeData(e.attr).removeClass(x.classes.input);if(w.length){y.detach().insertAfter(w);w.remove()}}function h(y){var w,x;w=n.isJQuery(y)||n.isElement(y);x=w?s(y).first():[];return x.length?x:null}})()});