var SearchIndex=window.SearchIndex=(function(){var h="c",i="i";function a(n){n=n||{};if(!n.datumTokenizer||!n.queryTokenizer){$.error("datumTokenizer and queryTokenizer are both required")}this.identify=n.identify||_.stringify;this.datumTokenizer=n.datumTokenizer;this.queryTokenizer=n.queryTokenizer;this.reset()}_.mixin(a.prototype,{bootstrap:function c(n){this.datums=n.datums;this.trie=n.trie},add:function(o){var n=this;o=_.isArray(o)?o:[o];_.each(o,function(p){var r,q;n.datums[r=n.identify(p)]=p;q=e(n.datumTokenizer(p));_.each(q,function(s){var v,u,t;v=n.trie;u=s.split("");while(t=u.shift()){v=v[h][t]||(v[h][t]=j());v[i].push(r)}})})},get:function b(n){var o=this;return _.map(n,function(p){return o.datums[p]})},search:function m(p){var n=this,q,o;q=e(this.queryTokenizer(p));_.each(q,function(r){var v,u,t,s;if(o&&o.length===0){return false}v=n.trie;u=r.split("");while(v&&(t=u.shift())){v=v[h][t]}if(v&&u.length===0){s=v[i].slice(0);o=o?f(o,s):s}else{o=[];return false}});return o?_.map(d(o),function(r){return n.datums[r]}):[]},all:function k(){var n=[];for(var o in this.datums){n.push(this.datums[o])}return n},reset:function g(){this.datums={};this.trie=j()},serialize:function l(){return{datums:this.datums,trie:this.trie}}});return a;function e(n){n=_.filter(n,function(o){return !!o});n=_.map(n,function(o){return o.toLowerCase()});return n}function j(){var n={};n[i]=[];n[h]={};return n}function d(r){var o={},q=[];for(var p=0,n=r.length;p<n;p++){if(!o[r[p]]){o[r[p]]=true;q.push(r[p])}}return q}function f(s,q){var o=0,r=0,t=[];s=s.sort();q=q.sort();var p=s.length,n=q.length;while(o<p&&r<n){if(s[o]<q[r]){o++}else{if(s[o]>q[r]){r++}else{t.push(s[o]);o++;r++}}}return t}})();